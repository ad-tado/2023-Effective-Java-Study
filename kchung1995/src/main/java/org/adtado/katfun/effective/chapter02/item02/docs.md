# Item 02. 생성자에 매개변수가 많다면 빌더를 고려하라

## 1. 멀티스레드 환경에서 점층적 생성자 패턴, 자바빈즈 패턴, 빌더 패턴을 테스트하고(코드 작성), 각 패턴의 차이점, 장단점에 대해서 분석하세요.

기본적으로 12개의 Boolean 타입 변수를 멤버로 가지는 객체를 고려했습니다.  
이 객체의 특징은, Boolean 타입 필드가 매우매우 많기 때문에 코드를 언뜻 봐서는 의미를 파악하기 힘들다는 점입니다.

### a. 점층적 생성자 패턴

`Item02TelescopingResponseTest`를 참고 바랍니다.  
장점

* 생성자이기 때문에, 코드 생성이 간단합니다.
* 인스턴스 생성에 별도의 코스트가 필요하지 않습니다.

단점

* 사용할 때 코드를 읽기가 너무너무 어렵습니다. 테스트 코드 내의 각 인스턴스 생성을 참고해 주세요.
* 각 경우에 맞는 생성자를 모두 정의해야 합니다. `Item02TelescopingResponse`를 보시면, 생성자가 3개 정의된 것을 확인할 수 있습니다. 프로덕션 레벨에서는, 이보다 훨씬 많은 생성자가 필요할
  수 있습니다.
* 어떤 값이 필수값이고, 어떤 값이 선택값인지 파악하기 어렵습니다.

### b. 자바빈즈 패턴

`Item02JavaBeansResponseTest`를 참고 바랍니다.
장점

* 코드를 읽기 쉽습니다. 각 필드에 어떤 값이 대입되는지 파악하기 쉽습니다.
* 인스턴스 생성에 별도의 코스트가 필요하지 않습니다.
  단점
* 코드가 너무 길어집니다. 인스턴스를 한 번 생성하기 위해, `Item02JavaBeansResponse`에서는 메소드를 최대 12개 호출해야 합니다.
* 각 멤버 변수가 final이 될 수 없습니다.
    * 이는 setter로 값을 할당하는 특성 상 불가피하지만, 클래스가 불변이 될 수 없다는 치명적인 단점이 존재합니다.
    * 따라서 멀티스레드 환경에 취약합니다.
    * 멀티스레드 환경에서의 예는 `Item02JavaBeansResponseTest`의 `javaBeansMultiThreadTest()`를 참고해 주세요.

### c. 빌더 패턴

`Item02BuilderResponseTest`를 참고 바랍니다.
장점

* 코드를 읽기 쉽습니다. 각 필드에 어떤 값이 대입되는지 파악하기 쉽습니다.
* 인스턴스의 생성 후에 값이 불변함을 보장할 수 있습니다.
  단점
* 빌더 코드를 별도로 작성해야 합니다. (`Lombok`으로 간소화 가능함)
* 코드 읽기에 완전한 해결책은 아닙니다. 필수 필드에 대해서는 여전히 맥락 파악이 어렵습니다.
* 빌더 생성 비용이 추가로 요구됩니다.